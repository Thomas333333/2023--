- [机器问答和信息检索大作业](#机器问答和信息检索大作业)
  - [信息检索部分](#信息检索部分)
    - [要求](#要求)
    - [前端优化](#前端优化)
    - [MetaSearch](#metasearch)
    - [检索排序算法](#检索排序算法)
      - [~~GPT回答结果~~（未实现）](#gpt回答结果未实现)
  - [信息检索部分](#信息检索部分-1)
    - [要求](#要求-1)
    - [任务一：界面完善(1-5分）（5分）](#任务一界面完善1-5分5分)
    - [任务二：根据分布向量相似度计算完善多种相似语义的提问(5-10分）（7分）](#任务二根据分布向量相似度计算完善多种相似语义的提问5-10分7分)
    - [任务三：完善问答匹配：对多个候选答案按照置信度进行排序分析(5-10分）（2分）](#任务三完善问答匹配对多个候选答案按照置信度进行排序分析5-10分2分)
    - [任务四：完善从多个候选文本中进行答案结果选择与综合(5-10分）（7分）](#任务四完善从多个候选文本中进行答案结果选择与综合5-10分7分)
    - [任务五：结合小的应用完善生成式深度学习程序的生成答案(5-10分）（0分）](#任务五结合小的应用完善生成式深度学习程序的生成答案5-10分0分)


# 机器问答和信息检索大作业

此项目为第四小组的机器问答(seachEngine-v3)和信息检索(mychat)代码部分

## 信息检索部分

在浏览器中输入url：http://localhost:8080/contentse

### 要求
> ElasticSearch-7.6.1

### 前端优化

+ 类百度效果，通过监听表单输入来改变html元素比例

  ![20230604112841](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604112841.png)

  <center>图1-输入前</center>

  ![20230604112916](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604112916.png)

  <center>图2-输入后</center>
+ 搜索框输入一键清除

  ![20230604113437](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604113437.png)

  <center>图3-有输入时</center>

  ![20230604113446](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604113446.png)

  <center>图4-清除后</center>

+ 前端界面美化
  + Logo绘制：用inkscape绘制仿Google logo的彩色字母矢量图
  + 搜索按钮美化：
  + 返回搜索结果的列表美化：
  + 单条搜索结果的界面美化：


![20230604113604](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604113604.png)

图-5 搜索页面

![20230604113612](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604113612.png)

图-6 答案页面


### MetaSearch

+ 实时爬取Bing的搜索结果，并载入到ES数据库中

### 检索排序算法

+ 使用BM25排序算法
  + 删除数据库中带标签即爬取的数据
  + 根据问题关键字实时爬取数据并且存入ES数据库
  + 根据关键字查询ES数据库
  + 根据屏蔽词进行二次打分
+ 包含正负词项搜索

#### ~~GPT回答结果~~（未实现）

## 信息检索部分（无模型文件，有些功能下载后不能运行）

### 要求
>使用Django，需要安装requirement.txt中的python库后，在对应虚拟环境的对应文件夹`mychat`下使用

```
python manage.py runserver
```
### 任务一：界面完善(1-5分）（5分）
+ Django模板（template）重构前端代码

### 任务二：根据分布向量相似度计算完善多种相似语义的提问(5-10分）（7分）
+ 发现之前训练语料中存在的问题  
  + 可能负样本中会生成正样本
+ 我们加入语料重新进行训练
  + 模型能分辨：    
    + 如何进行A
    + 如何实现A
    + A如何实现
    + 完成A需要哪些过程
    + 实施A需要哪些步骤

  + 模型不能分辨： 
    + A是什么C
		+ A是什么类型的C
		+ 说明A是什么样的C
		+ 描述A是什么样的C
		+ 简述A是什么样的C

![20230604210322](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604210322.png)

![20230604210356](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604210356.png)
训练前效果

![20230604210431](https://cdn.jsdelivr.net/gh/Thomas333333/MyPostImage/Images/20230604210431.png)
训练后效果

### 任务三：完善问答匹配：对多个候选答案按照置信度进行排序分析(5-10分）（2分）
+ 将任务二改进的答案分数上进行排序

### 任务四：完善从多个候选文本中进行答案结果选择与综合(5-10分）（7分）
+ 将“在问答库中提问”和“上下文归纳”进行结合，完成候选问题的综合

### 任务五：结合小的应用完善生成式深度学习程序的生成答案(5-10分）（0分）
+ 使用[T5-Pegasus](https://github.com/ZhuiyiTechnology/t5-pegasus)完成对输入文本的梗概



